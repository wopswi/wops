<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wops Editor de Vídeos - Sistema de Pagos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 
      IMPORTANTE: Se ha insertado tu Client ID "Live" para producción.
      Este ID SOLO funcionará cuando publiques tu página en un sitio web real.
      Mostrará un error en este entorno de previsualización por seguridad de PayPal.
    -->
    <script src="https://www.paypal.com/sdk/js?client-id=AXBWj9ERw_CXPtw_wpvXqnX0ZKzGT5DFQgrYqYKhrhSPo08IzN5r4w0G9y0FT-diTpkNxiGC8ass5cXc&currency=USD"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Contenedor para las animaciones */
        .animation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        .animation-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .animation-container {
            transform: scale(0.7);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
        }
        .animation-overlay.visible .animation-container {
            transform: scale(1);
            opacity: 1;
        }

        /* Animación de Éxito (Checkmark) */
        .success-checkmark {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: block;
            stroke-width: 4;
            stroke: #fff;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #4bb71b;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
        }
        .success-checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 4;
            stroke-miterlimit: 10;
            stroke: #4bb71b;
            fill: none;
            animation: stroke .6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }
        .success-checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke .3s cubic-bezier(0.65, 0, 0.45, 1) .8s forwards;
        }
        @keyframes stroke {
            100% { stroke-dashoffset: 0; }
        }
        @keyframes scale {
            0%, 100% { transform: none; }
            50% { transform: scale3d(1.1, 1.1, 1); }
        }
        @keyframes fill {
            100% { box-shadow: inset 0px 0px 0px 50px #4bb71b; }
        }

        /* Animación de Error (Cross) */
        .error-cross {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: block;
            stroke-width: 4;
            stroke: #fff;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #d64949;
            animation: fill-error .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
        }
        .error-cross__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 4;
            stroke-miterlimit: 10;
            stroke: #d64949;
            fill: none;
            animation: stroke .6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }
        .error-cross__line {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
        }
        .error-cross__line--left {
            animation: stroke .3s cubic-bezier(0.65, 0, 0.45, 1) .8s forwards;
        }
        .error-cross__line--right {
            animation: stroke .3s cubic-bezier(0.65, 0, 0.45, 1) 1s forwards;
        }
        @keyframes fill-error {
            100% { box-shadow: inset 0px 0px 0px 50px #d64949; }
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-md">
        <div class="bg-white dark:bg-gray-800 shadow-2xl rounded-2xl p-6 sm:p-8">
            <header class="text-center mb-8">
                <i class="fas fa-film fa-3x text-blue-500"></i>
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mt-4">Wops Editor de vídeos</h1>
                <p class="text-gray-600 dark:text-gray-400 mt-2">Gracias, sigamos trabajando juntos!</p>
            </header>

            <div class="mb-6">
                <label for="amount" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Monto (USD)</label>
                <div class="relative">
                    <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                        <span class="text-gray-500 sm:text-sm">$</span>
                    </div>
                    <input type="number" id="amount" name="amount" value="0.01" min="0.01" step="0.01" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg p-3 pl-7 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>

            <div id="paypal-button-container"></div>
            <div id="status-message" class="mt-6 text-center text-sm"></div>
        </div>
    </div>

    <!-- Overlay para Animaciones -->
    <div id="animation-overlay" class="animation-overlay">
        <div class="animation-container bg-gray-800/80 backdrop-blur-sm p-8 rounded-2xl text-center">
            <!-- Animación de Éxito -->
            <div id="success-animation" class="hidden">
                <svg class="success-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="success-checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="success-checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
            </div>
            <!-- Animación de Error -->
            <div id="error-animation" class="hidden">
                <svg class="error-cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="error-cross__circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="error-cross__line error-cross__line--left" fill="none" d="M16,16 l20,20" />
                    <path class="error-cross__line error-cross__line--right" fill="none" d="M16,36 l20,-20" />
                </svg>
            </div>
            <p id="animation-message" class="text-white font-semibold mt-6 text-lg"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof paypal === 'undefined') {
                const paypalContainer = document.getElementById('paypal-button-container');
                paypalContainer.innerHTML = '<p class="text-center text-red-500">Error: No se pudo cargar el SDK de PayPal. Revisa tu conexión o la configuración del Client ID.</p>';
                return;
            }

            const amountInput = document.getElementById('amount');
            const statusMessage = document.getElementById('status-message');
            const animationOverlay = document.getElementById('animation-overlay');
            const successAnimation = document.getElementById('success-animation');
            const errorAnimation = document.getElementById('error-animation');
            const animationMessage = document.getElementById('animation-message');

            function showAnimation(type, message) {
                successAnimation.classList.add('hidden');
                errorAnimation.classList.add('hidden');
                
                if (type === 'success') {
                    successAnimation.classList.remove('hidden');
                } else {
                    errorAnimation.classList.remove('hidden');
                }
                
                animationMessage.textContent = message;
                animationOverlay.classList.add('visible');

                setTimeout(() => {
                    animationOverlay.classList.remove('visible');
                }, 3000);
            }

            paypal.Buttons({
                createOrder: function(data, actions) {
                    const amountValue = parseFloat(amountInput.value).toFixed(2);
                    if (isNaN(amountValue) || amountValue < 0.01) {
                        statusMessage.innerHTML = `<span class="text-red-500 font-semibold"><i class="fas fa-times-circle mr-2"></i>El monto mínimo es $0.01 USD.</span>`;
                        return actions.reject();
                    } else {
                        statusMessage.innerHTML = '';
                    }
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: amountValue,
                                currency_code: 'USD'
                            }
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        showAnimation('success', `¡Pago completado, ${details.payer.name.given_name}!`);
                    });
                },
                onError: function(err) {
                    console.error('Ocurrió un error en el pago:', err);
                    showAnimation('error', 'El pago no se pudo completar.');
                },
                onCancel: function (data) {
                    console.log('Pago cancelado por el usuario.');
                    showAnimation('error', 'El pago fue cancelado.');
                }
            }).render('#paypal-button-container');
        });
    </script>
</body>
</html>
